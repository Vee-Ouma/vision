<h1>Search</h1>
<p>
	<form id="rxform"></form>	
	<a id="searchButton" class="btn btn-primary btn-large icon-search"> Search</a>
	<hr class="bs-docs-separator">
</p>

<table id="searchResults" class="table table-striped table-bordered table-condensed">
<thead>
<tr>
	<th>Score</th>
    <th>Call #</th>
	<th>OD Sph</th>
    <th>OD Cyl</th>
	<th>OD Axis</th>
    <th>OD Add</th>
	<th>OS Sph</th>
    <th>OS Cyl</th>
	<th>OS Axis</th>
    <th>OS Add</th>
	<th>Sungl.</th>
    <th>Gender</th>
	<th>Size</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

<script type="text/javascript">
	var sphcylFormat = function (val) {
		return (val >= 0 ? '+' : '') + val.toFixed(2);
	};
	
	var axisFormat = function(val) {
		if (val >= 100)
			return val.toString();
		else if (val >= 10)
			return '0' + val.toString();
		else
			return '00' + val.toString();
	};
</script>

<script type="text/template" id="resultRowTemplate">
<% _.each(data, function(result) { %>
	<tr class="searchResultRow">
		<td><%= result.Score %></td>
        <td><%= result.Group %>/<%= result.Number %></td>
		<td class="table-horizontal-break"><%= sphcylFormat(result.OD_Spherical) %></td>
		<% if(result.OD_Cylindrical === 0 && result.OD_Axis === 0 && result.OD_Add === 0) { %>
		<td colspan="3">DS</td>
		<% } else { %>
		<td><%= sphcylFormat(result.OD_Cylindrical) %></td>
		<td><%= axisFormat(result.OD_Axis) %></td>
		<td><%= sphcylFormat(result.OD_Add) %></td>
		<% } %>
		<td class="table-horizontal-break"><%= sphcylFormat(result.OS_Spherical) %></td>
		<% if(result.OD_Cylindrical === 0 && result.OD_Axis === 0 && result.OD_Add === 0) { %>
		<td colspan="3">DS</td>
		<% } else { %>
		<td><%= sphcylFormat(result.OS_Cylindrical) %></td>
		<td><%= axisFormat(result.OS_Axis) %></td>
		<td><%= sphcylFormat(result.OS_Add) %></td>
		<% } %>
		<td class="table-horizontal-break"><%= result.Sunglasses?'Yes':'No' %></td>
		<td><%= result.Gender %></td>
		<td><%= result.Size %></td>
	</tr>
<%  }); %>
</script>